// original script.js by seth (compressed for a more readable one, contact me)
const gradientText=document.getElementById("gradient-text"),startColorInput=document.getElementById("start-color"),endColorInput=document.getElementById("end-color"),paletteContainer=document.getElementById("palette"),fontSelect=document.getElementById("font-select"),fontSizeSelect=document.getElementById("font-size"),boldCheckbox=document.getElementById("bold-checkbox"),italicCheckbox=document.getElementById("italic-checkbox"),copyButton=document.getElementById("copy-button"),outputText=document.getElementById("output-text"),bbcodeOutput=document.getElementById("bbcode-output");function updatePalette(){let e=startColorInput.value,t=endColorInput.value,n=gradientText.value,o=Math.min(n.length,6);paletteContainer.innerHTML="";for(let a=0;a<o;a++){let u=document.createElement("div");u.className="palette-color",u.style.backgroundColor=interpolateColor(e,t,a/Math.max(n.length-1,1)),u.addEventListener("click",()=>setColorFromPalette(u.style.backgroundColor,a)),paletteContainer.appendChild(u)}updateOutputText()}function updateOutputText(){let e=fontSelect.value,t=fontSizeSelect.value,n=boldCheckbox.checked,o=italicCheckbox.checked,a=startColorInput.value,u=endColorInput.value,l=`font-family: ${e}, sans-serif;`;"Default"!==t&&(l+=`font-size: ${t}rem;`),n&&(l+="font-weight: bold;"),o&&(l+="font-style: italic;"),outputText.style=l,outputText.innerHTML=gradientText.value.split("").map((e,t)=>{let n=interpolateColor(a,u,t/Math.max(gradientText.value.length-1,1));return`<span style="color: ${n}">${e}</span>`}).join(""),"Default"===t&&outputText.style.removeProperty("font-size"),updateBBcodeOutput()}function setColorFromPalette(e,t){gradientText.focus(),document.execCommand("insertHTML",!1,`<span style="color: ${e}">${gradientText.value[t]}</span>`),updatePalette(),updateOutputText(),updateBBcodeOutput()}function interpolateColor(e,t,n){let o=hexToRgb(e),a=hexToRgb(t),u={r:Math.round(o.r+n*(a.r-o.r)),g:Math.round(o.g+n*(a.g-o.g)),b:Math.round(o.b+n*(a.b-o.b))};return rgbToHex(u.r,u.g,u.b)}function hexToRgb(e){return{r:parseInt((e=e.replace(/^#/,"")).substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}}function rgbToHex(e,t,n){return`#${(16777216|e<<16|t<<8|n).toString(16).slice(1)}`}function generateBBcode(){let e=fontSelect.value,t=fontSizeSelect.value,n=boldCheckbox.checked,o=italicCheckbox.checked,a=startColorInput.value,u=endColorInput.value,l=gradientText.value,d="";n&&(d+="[b]"),o&&(d+="[i]"),"Default"!==e&&(d+=`[font="${e}"]`),"Default"!==t&&(d+=`[size=${100*t}]`);for(let r=0;r<l.length;r++){let c=interpolateColor(a,u,r/Math.max(l.length-1,1));d+=`[color=${c}]${l[r]}[/color]`}return"Default"!==t&&(d+="[/size]"),"Default"!==e&&(d+="[/font]"),o&&(d+="[/i]"),n&&(d+="[/b]"),d}function updateBBcodeOutput(){bbcodeOutput.innerText=generateBBcode()}function clearTextarea(){document.getElementById("gradient-text").value="",alert("Text will be cleared!")}function addCopyIcon(e,t){var n=document.querySelector(e);if(!n){console.error("Container element not found");return}var o=document.createElement("i");o.className="fas fa-copy copy-icon",n.appendChild(o),o.addEventListener("click",function(){t()})}function copyToClipboard(){var e=document.getElementById("bbcode-output");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.setSelectionRange(0,0),alert("Text copied to clipboard!")}gradientText.addEventListener("input",updatePalette),startColorInput.addEventListener("input",updatePalette),endColorInput.addEventListener("input",updatePalette),fontSelect.addEventListener("change",updateOutputText),fontSizeSelect.addEventListener("change",updateOutputText),boldCheckbox.addEventListener("change",updateOutputText),italicCheckbox.addEventListener("change",updateOutputText),updatePalette(),updateOutputText(),updateBBcodeOutput(),gradientText.addEventListener("input",function(){updatePalette(),updateOutputText(),updateBBcodeOutput()}),startColorInput.addEventListener("input",function(){updateOutputText(),updateBBcodeOutput()}),endColorInput.addEventListener("input",function(){updateOutputText(),updateBBcodeOutput()}),document.addEventListener("keydown",function(e){e.ctrlKey&&"x"===e.key?copyToClipboard():e.ctrlKey&&"y"===e.key&&clearTextarea()}),document.addEventListener("DOMContentLoaded",function(){addCopyIcon("#bbcode-output",copyToClipboard)});
